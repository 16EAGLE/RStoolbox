
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> Extract bandwise information from ImageMetaData </title>
    <meta name="author" content="Benjamin Leutner">
    <link href='http://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,300italic' rel='stylesheet' type='text/css'>
    <link href='/assets/themes/the-minimum/css/style.css' rel="stylesheet" media="all">
    <link href="http://feeds.feedburner.com/" rel="alternate" title=" Extract bandwise information from ImageMetaData " type="application/atom+xml">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
</head>

<body>
    <div id="page" class="hentry">
        <header class="the-header">
            <div class="unit-head">
                <div class="unit-inner unit-head-inner">

                    <nav class="nav-global">
                        <ul>
                            <li class="page"><a href="/">Home</a>
                            </li>
                            <li class="page"><a href="/blog.html">Blog</a>
                            </li>
                            <li class="documentation"><a href="/rstbx-docu">Documentation</a>
                            </li>
                            <li class="category"><a href="/about.html">About</a>
                            </li>
                            <li class="category"><a href="https://github.com/bleutner/RStoolbox">Github</a>
                            </li>
                       </ul>
                    </nav>
                 </div>
                 
                <!-- unit-inner -->
            </div>
            <!-- unit-head -->
        </header>
        <div class="body" role="main">
            <div class="unit-body">
                <div class="unit-inner unit-body-inner">
                     <div class="entry-content">                      
                         
<article class="unit-article layout-page">
    <div class="unit-inner unit-article-inner">
        <div class="content">
            <header>
                 <div class="unit-inner unit-head-inner">
                        <div class="h4 entry-title"> 
                            <table width="100%"><tr><td><strong>getMeta<strong> { <a href="index.html">RStoolbox</a>}</td><td align="right">R Documentation</td></tr></table>
                            <h3> Extract bandwise information from ImageMetaData </h2>
                        </div>
                    </div>
                    <!-- unit-inner -->
                <!-- unit-head -->
            </header>

            <div class="bd">
                <div class="entry-content">
                    
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Extract bandwise information from ImageMetaData</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />

                            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/github.min.css">
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/languages/r.min.js"></script>
                            <script>hljs.initHighlightingOnLoad();</script>
                            </head><body>

<h3>Description</h3>

<p>This is an accessor function to quickly access information stored in ImageMetaData, e.g. scale factor per band.
Intended for use with imagery which was imported using stackMeta. Will return parameters using the actual band order in img.
</p>


<h3>Usage</h3>

<pre>
getMeta(img, metaData, what)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code class="r">img</code></td>
<td>
<p>Raster* or character vector with band names.</p>
</td></tr>
<tr valign="top"><td><code class="r">metaData</code></td>
<td>
<p>ImageMetaData or path to meta data file.</p>
</td></tr>
<tr valign="top"><td><code class="r">what</code></td>
<td>
<p>Character. Parameter to extract. Either data descriptors, or conversion parameters (see Details for options)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Possible metadata parameters (<code class="r">what</code> argument):
</p>
<p>Data descriptors
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
'FILES' </td><td style="text-align: left;">  </td>
</tr>
<tr>
 <td style="text-align: left;">
'QUANTITY' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'CATEGORY' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'NA_VALUE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'SATURATE_VALUE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'SCALE_FACTOR' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'DATA_TYPE' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
'SPATIAL_RESOLUTION' </td><td style="text-align: left;"> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Conversion parameters
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
'CALRAD' </td><td style="text-align: left;"> Conversion parameters from DN to radiance </td>
</tr>
<tr>
 <td style="text-align: left;">
'CALBT' </td><td style="text-align: left;"> Conversion parameters from radiance to brightness temperature </td>
</tr>
<tr>
 <td style="text-align: left;">
'CALREF' </td><td style="text-align: left;"> Conversion parameters from DN to reflectance (Landsat 8 only) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>If <code class="r">what</code> is one of <code class="r">c('CALRAD', 'CALBT', 'CALREF')</code> a data.frame is returned with bands in rows (order corresponding to <code class="r">img</code> band order).
Otherwise a named numeric vector with the corresponding parameter is returned (layernames as names).
</p>


<h3>Examples</h3>

<pre><code class="r">## Import example data
mtlFile  &lt;- system.file(&quot;external/landsat/LT52240631988227CUB02_MTL.txt&quot;, package=&quot;RStoolbox&quot;)
meta &lt;- readMeta(mtlFile)
lsat &lt;- stackMeta(mtlFile)

## Get integer scale factors
getMeta(lsat, metaData = meta, what = &quot;SCALE_FACTOR&quot;)
</code></pre>

<pre><code class="r">#&gt; B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn 
#&gt;     1     1     1     1     1     1     1
</code></pre>

<pre><code class="r">## Conversion factors for brightness temperature
getMeta(&quot;B6_dn&quot;, metaData = meta, what = &quot;CALBT&quot;)
</code></pre>

<pre><code class="r">#&gt;           K1      K2
#&gt; B6_dn 607.76 1260.56
</code></pre>

<pre><code class="r">## Conversion factors to top-of-atmosphere radiance
## Band order not corresponding to metaData order
getMeta(lsat[[5:1]], metaData = meta, what = &quot;CALRAD&quot;)
</code></pre>

<pre><code class="r">#&gt;         offset  gain
#&gt; B5_dn -0.49035 0.120
#&gt; B4_dn -2.38602 0.876
#&gt; B3_dn -2.21398 1.044
#&gt; B2_dn -4.16220 1.322
#&gt; B1_dn -2.19134 0.671
</code></pre>

<pre><code class="r">## Get integer scale factors
getMeta(lsat, metaData = meta, what = &quot;SCALE_FACTOR&quot;)
</code></pre>

<pre><code class="r">#&gt; B1_dn B2_dn B3_dn B4_dn B5_dn B6_dn B7_dn 
#&gt;     1     1     1     1     1     1     1
</code></pre>

<pre><code class="r">## Get file basenames
getMeta(lsat, metaData = meta, what = &quot;FILES&quot;)
</code></pre>

<pre><code class="r">#&gt;                          B1_dn                          B2_dn 
#&gt; &quot;LT52240631988227CUB02_B1.TIF&quot; &quot;LT52240631988227CUB02_B2.TIF&quot; 
#&gt;                          B3_dn                          B4_dn 
#&gt; &quot;LT52240631988227CUB02_B3.TIF&quot; &quot;LT52240631988227CUB02_B4.TIF&quot; 
#&gt;                          B5_dn                          B6_dn 
#&gt; &quot;LT52240631988227CUB02_B5.TIF&quot; &quot;LT52240631988227CUB02_B6.TIF&quot; 
#&gt;                          B7_dn 
#&gt; &quot;LT52240631988227CUB02_B7.TIF&quot;
</code></pre>


<hr /><div style="text-align: center;">[Package <em>RStoolbox</em> version 0.1.1.9000 <a href="index.html">Index</a>]</div>
</body></html>

                </div>
                <!-- entry-content -->
            </div>
            <!-- bd -->

            <footer class="unit-foot">
                <div class="unit-inner unit-foot-inner">
                    <p class="gotop">
                        <a href="#page">Back to Top</a>
                    </p>
                </div>
            </footer>

        </div>
        <!-- content -->
    </div>
    <!-- unit-inner -->
</article>
                    </div>         
                      
                </div>
                   
                <!-- unit-inner -->
            </div>
            <!-- unit-body -->
        </div>
        <!-- body -->
        <footer class="the-footer">
            <div class="unit-foot">
                <div class="unit-inner unit-foot-inner">
                    <div class="misc vcard">
                        <div>
                            <p>Last update 2015-09-11 18:40:26 +0200</p>
                        </div>
                        <h4>about</h4>
                        <ul>

                            <li class="contact"><address><span class="author fn n">Benjamin Leutner</span> - <span class="fn email">benjamin.leutner@uni-wuerzburg.de</span></address>
                            </li>
                            <li class="github"><a href="http://github.com/bleutner/" rel="me">github.com/bleutner</a>
                            </li>
                           <!-- <li class="rss"><a href="http://feeds.feedburner.com/">Subscribe to RSS Feed</a>
                            </li>-->
                        </ul>
                    </div>
                    <!-- misc -->
                    <p class="tinyfoot">
                        This site is powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>. The original theme was <a href="http://layouts-the.me/">Theme: the_minimum</a>
                        </br>
                       <a href="impressum.html">Impressum</a>
                    </p>
                </div>
                <!-- unit-foot-inner -->
            </div>
            <!-- unit-foot -->
        </footer>
    </div>
    <!-- page -->
    <script>
        (function (d, s) {
            var js, fjs = d.getElementsByTagName(s)[0],
                load = function (url, id) {
                    if (d.getElementById(id)) {
                        return;
                    }
                    js = d.createElement(s);
                    js.src = url;
                    js.id = id;
                    fjs.parentNode.insertBefore(js, fjs);
                };
            load('//platform.twitter.com/widgets.js', 'tweetjs');
            // load('https://apis.googlecom/js/plusone.js', 'gplus1js'); // Checkout http://j.mp/ApDgMr for usage html for this is <div class="g-plusone" data-size="medium"></div>
            // load('//connect.facebook.net/en_US/all.js#xfbml=1', 'fbjssdk'); // Checkout http://j.mp/wZw2xR for using open graph protorol html for this is <div class="fb-like" data-href="/rstbx-docu/getMeta.html" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>
        }(document, 'script'));
    </script>
    <script>
        /*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
        (function (j) {
            var i = j.document;
            if (!i.querySelectorAll) {
                return
            }
            var l = i.querySelectorAll("meta[name=viewport]")[0],
                a = l && l.getAttribute("content"),
                h = a + ", maximum-scale=1.0",
                d = a + ", maximum-scale=10.0",
                g = true,
                c = j.orientation,
                k = 0;
            if (!l) {
                return
            }

            function f() {
                l.setAttribute("content", d);
                g = true
            }

            function b() {
                l.setAttribute("content", h);
                g = false
            }

            function e(m) {
                c = Math.abs(j.orientation);
                k = Math.abs(m.gamma);
                if (k > 8 && c === 0) {
                    if (g) {
                        b()
                    }
                } else {
                    if (!g) {
                        f()
                    }
                }
            }
            j.addEventListener("orientationchange", f, false);
            j.addEventListener("deviceorientation", e, false)
        })(this);
    </script>

    
</body>

</html>
